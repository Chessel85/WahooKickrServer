<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KICKR Control</title>
</head>
<body>
    <h1>Wahoo KICKR Dashboard</h1>
    <button id="connectButton">Scan for KICKR</button>
    <p id="status">Status: Disconnected</p>
    <ul id="deviceList"></ul>

    <script>
const connectButton = document.getElementById('connectButton');
const statusText = document.getElementById('status');

connectButton.addEventListener('click', async () => {
    try {
        statusText.textContent = "Status: Opening selector...";
        
        // This "acceptAllDevices" tells the phone to show everything it sees
        const device = await navigator.bluetooth.requestDevice({
            acceptAllDevices: true,
            optionalServices: ['00001826-0000-1000-8000-00805f9b34fb', '00001818-0000-1000-8000-00805f9b34fb']
        });

        statusText.textContent = `Status: Connecting to ${device.name}...`;
        
        const server = await device.gatt.connect();
        statusText.textContent = `Status: Success! Connected to ${device.name}`;

    } catch (error) {
        statusText.textContent = "Status: Error - " + error;
        console.error(error);
    }
});
    </script>
</body>
</html>